<!DOCTYPE html>
<meta charset="utf-8">
<body>
<svg width="800" height="400"></svg>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const data = [
  { date: new Date('2025-10-21'), open: 101, high: 108, low: 99, close: 104 },
  { date: new Date('2025-10-22'), open: 104, high: 110, low: 102, close: 106 },
  { date: new Date('2025-10-23'), open: 106, high: 107, low: 100, close: 101 },
  { date: new Date('2025-10-24'), open: 101, high: 105, low: 99, close: 103 },
  { date: new Date('2025-10-25'), open: 103, high: 111, low: 102, close: 110 }
];

const svg = d3.select("svg");
const margin = {top: 20, right: 40, bottom: 30, left: 40};
const width = +svg.attr("width") - margin.left - margin.right;
const height = +svg.attr("height") - margin.top - margin.bottom;

const g = svg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);

const x = d3.scaleBand()
  .domain(data.map(d => d.date))
  .range([0, width])
  .padding(0.3);

const y = d3.scaleLinear()
  .domain([d3.min(data, d => d.low), d3.max(data, d => d.high)])
  .nice()
  .range([height, 0]);

g.append("g")
  .attr("transform", `translate(0,${height})`)
  .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%b %d")));

g.append("g").call(d3.axisLeft(y));

// Wick lines
g.selectAll(".wick")
  .data(data)
  .enter()
  .append("line")
  .attr("class", "wick")
  .attr("x1", d => x(d.date) + x.bandwidth()/2)
  .attr("x2", d => x(d.date) + x.bandwidth()/2)
  .attr("y1", d => y(d.high))
  .attr("y2", d => y(d.low))
  .attr("stroke", "black");

// Candle bodies
g.selectAll(".candle")
  .data(data)
  .enter()
  .append("rect")
  .attr("class", "candle")
  .attr("x", d => x(d.date))
  .attr("y", d => y(Math.max(d.open, d.close)))
  .attr("width", x.bandwidth())
  .attr("height", d => Math.abs(y(d.open) - y(d.close)))
  .attr("fill", d => d.close > d.open ? "green" : "red");
</script>
</body>
